{"ast":null,"code":"module.exports = class RateLimiterAbstract {\n  /**\n   *\n   * @param opts Object Defaults {\n   *   points: 4, // Number of points\n   *   duration: 1, // Per seconds\n   *   blockDuration: 0, // Block if consumed more than points in current duration for blockDuration seconds\n   *   execEvenly: false, // Execute allowed actions evenly over duration\n   *   execEvenlyMinDelayMs: duration * 1000 / points, // ms, works with execEvenly=true option\n   *   keyPrefix: 'rlflx',\n   * }\n   */\n  constructor() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.points = opts.points;\n    this.duration = opts.duration;\n    this.blockDuration = opts.blockDuration;\n    this.execEvenly = opts.execEvenly;\n    this.execEvenlyMinDelayMs = opts.execEvenlyMinDelayMs;\n    this.keyPrefix = opts.keyPrefix;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  set points(value) {\n    this._points = value >= 0 ? value : 4;\n  }\n\n  get duration() {\n    return this._duration;\n  }\n\n  set duration(value) {\n    this._duration = typeof value === 'undefined' ? 1 : value;\n  }\n\n  get msDuration() {\n    return this.duration * 1000;\n  }\n\n  get blockDuration() {\n    return this._blockDuration;\n  }\n\n  set blockDuration(value) {\n    this._blockDuration = typeof value === 'undefined' ? 0 : value;\n  }\n\n  get msBlockDuration() {\n    return this.blockDuration * 1000;\n  }\n\n  get execEvenly() {\n    return this._execEvenly;\n  }\n\n  set execEvenly(value) {\n    this._execEvenly = typeof value === 'undefined' ? false : Boolean(value);\n  }\n\n  get execEvenlyMinDelayMs() {\n    return this._execEvenlyMinDelayMs;\n  }\n\n  set execEvenlyMinDelayMs(value) {\n    this._execEvenlyMinDelayMs = typeof value === 'undefined' ? Math.ceil(this.msDuration / this.points) : value;\n  }\n\n  get keyPrefix() {\n    return this._keyPrefix;\n  }\n\n  set keyPrefix(value) {\n    if (typeof value === 'undefined') {\n      value = 'rlflx';\n    }\n\n    if (typeof value !== 'string') {\n      throw new Error('keyPrefix must be string');\n    }\n\n    this._keyPrefix = value;\n  }\n\n  _getKeySecDuration() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return options && options.customDuration >= 0 ? options.customDuration : this.duration;\n  }\n\n  getKey(key) {\n    return this.keyPrefix.length > 0 ? `${this.keyPrefix}:${key}` : key;\n  }\n\n  parseKey(rlKey) {\n    return rlKey.substring(this.keyPrefix.length);\n  }\n\n  consume() {\n    throw new Error(\"You have to implement the method 'consume'!\");\n  }\n\n  penalty() {\n    throw new Error(\"You have to implement the method 'penalty'!\");\n  }\n\n  reward() {\n    throw new Error(\"You have to implement the method 'reward'!\");\n  }\n\n  get() {\n    throw new Error(\"You have to implement the method 'get'!\");\n  }\n\n  set() {\n    throw new Error(\"You have to implement the method 'set'!\");\n  }\n\n  block() {\n    throw new Error(\"You have to implement the method 'block'!\");\n  }\n\n  delete() {\n    throw new Error(\"You have to implement the method 'delete'!\");\n  }\n\n};","map":{"version":3,"sources":["C:/Users/Akshay Mishra/OneDrive/Desktop/twitter-clone-dapp/node_modules/rate-limiter-flexible/lib/RateLimiterAbstract.js"],"names":["module","exports","RateLimiterAbstract","constructor","opts","points","duration","blockDuration","execEvenly","execEvenlyMinDelayMs","keyPrefix","_points","value","_duration","msDuration","_blockDuration","msBlockDuration","_execEvenly","Boolean","_execEvenlyMinDelayMs","Math","ceil","_keyPrefix","Error","_getKeySecDuration","options","customDuration","getKey","key","length","parseKey","rlKey","substring","consume","penalty","reward","get","set","block","delete"],"mappings":"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","sourcesContent":["module.exports = class RateLimiterAbstract {\n  /**\n   *\n   * @param opts Object Defaults {\n   *   points: 4, // Number of points\n   *   duration: 1, // Per seconds\n   *   blockDuration: 0, // Block if consumed more than points in current duration for blockDuration seconds\n   *   execEvenly: false, // Execute allowed actions evenly over duration\n   *   execEvenlyMinDelayMs: duration * 1000 / points, // ms, works with execEvenly=true option\n   *   keyPrefix: 'rlflx',\n   * }\n   */\n  constructor(opts = {}) {\n    this.points = opts.points;\n    this.duration = opts.duration;\n    this.blockDuration = opts.blockDuration;\n    this.execEvenly = opts.execEvenly;\n    this.execEvenlyMinDelayMs = opts.execEvenlyMinDelayMs;\n    this.keyPrefix = opts.keyPrefix;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  set points(value) {\n    this._points = value >= 0 ? value : 4;\n  }\n\n  get duration() {\n    return this._duration;\n  }\n\n  set duration(value) {\n    this._duration = typeof value === 'undefined' ? 1 : value;\n  }\n\n  get msDuration() {\n    return this.duration * 1000;\n  }\n\n  get blockDuration() {\n    return this._blockDuration;\n  }\n\n  set blockDuration(value) {\n    this._blockDuration = typeof value === 'undefined' ? 0 : value;\n  }\n\n  get msBlockDuration() {\n    return this.blockDuration * 1000;\n  }\n\n  get execEvenly() {\n    return this._execEvenly;\n  }\n\n  set execEvenly(value) {\n    this._execEvenly = typeof value === 'undefined' ? false : Boolean(value);\n  }\n\n  get execEvenlyMinDelayMs() {\n    return this._execEvenlyMinDelayMs;\n  }\n\n  set execEvenlyMinDelayMs(value) {\n    this._execEvenlyMinDelayMs = typeof value === 'undefined' ? Math.ceil(this.msDuration / this.points) : value;\n  }\n\n  get keyPrefix() {\n    return this._keyPrefix;\n  }\n\n  set keyPrefix(value) {\n    if (typeof value === 'undefined') {\n      value = 'rlflx';\n    }\n    if (typeof value !== 'string') {\n      throw new Error('keyPrefix must be string');\n    }\n    this._keyPrefix = value;\n  }\n\n  _getKeySecDuration(options = {}) {\n    return options && options.customDuration >= 0\n      ? options.customDuration\n      : this.duration;\n  }\n\n  getKey(key) {\n    return this.keyPrefix.length > 0 ? `${this.keyPrefix}:${key}` : key;\n  }\n\n  parseKey(rlKey) {\n    return rlKey.substring(this.keyPrefix.length);\n  }\n\n  consume() {\n    throw new Error(\"You have to implement the method 'consume'!\");\n  }\n\n  penalty() {\n    throw new Error(\"You have to implement the method 'penalty'!\");\n  }\n\n  reward() {\n    throw new Error(\"You have to implement the method 'reward'!\");\n  }\n\n  get() {\n    throw new Error(\"You have to implement the method 'get'!\");\n  }\n\n  set() {\n    throw new Error(\"You have to implement the method 'set'!\");\n  }\n\n  block() {\n    throw new Error(\"You have to implement the method 'block'!\");\n  }\n\n  delete() {\n    throw new Error(\"You have to implement the method 'delete'!\");\n  }\n};\n"]},"metadata":{},"sourceType":"script"}