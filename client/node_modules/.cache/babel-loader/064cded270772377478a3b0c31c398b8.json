{"ast":null,"code":"import { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nconst ZEROS = '0000000000000000000';\nconst SEVENS = '7777777777777777777';\nconst ZERO_OFFSET = '0'.charCodeAt(0);\nconst USTAR_MAGIC = uint8ArrayFromString('ustar\\x00', 'binary');\nconst USTAR_VER = uint8ArrayFromString('00', 'binary');\nconst MASK = parseInt('7777', 8);\nconst MAGIC_OFFSET = 257;\nconst VERSION_OFFSET = 263;\n\nconst toTypeflag = function (flag) {\n  switch (flag) {\n    case 'file':\n      return 0;\n\n    case 'link':\n      return 1;\n\n    case 'symlink':\n      return 2;\n\n    case 'character-device':\n      return 3;\n\n    case 'block-device':\n      return 4;\n\n    case 'directory':\n      return 5;\n\n    case 'fifo':\n      return 6;\n\n    case 'contiguous-file':\n      return 7;\n\n    case 'pax-header':\n      return 72;\n\n    default:\n      return 0;\n  }\n};\n\nconst cksum = function (block) {\n  let sum = 8 * 32;\n\n  for (let i = 0; i < 148; i++) sum += block[i];\n\n  for (let j = 156; j < 512; j++) sum += block[j];\n\n  return sum;\n};\n\nconst encodeOct = function (val, n) {\n  const str = val.toString(8);\n\n  if (str.length > n) {\n    return uint8ArrayFromString(SEVENS.slice(0, n) + ' ');\n  }\n\n  return uint8ArrayFromString(ZEROS.slice(0, n - str.length) + str + ' ');\n};\n\nconst addLength = function (str) {\n  const len = uint8ArrayFromString(str).byteLength;\n  let digits = Math.floor(Math.log(len) / Math.log(10)) + 1;\n\n  if (len + digits >= Math.pow(10, digits)) {\n    digits++;\n  }\n\n  return `${len + digits}${str}`;\n};\n\nexport function encodePax(opts) {\n  let result = '';\n\n  if (opts.name != null) {\n    result += addLength(' path=' + opts.name + '\\n');\n  }\n\n  if (opts.linkname != null) {\n    result += addLength(' linkpath=' + opts.linkname + '\\n');\n  }\n\n  const pax = opts.pax;\n\n  if (pax != null) {\n    for (const key in pax) {\n      if (Object.prototype.hasOwnProperty.call(pax, key)) {\n        result += addLength(' ' + key + '=' + pax[key] + '\\n');\n      }\n    }\n  }\n\n  return uint8ArrayFromString(result);\n}\nexport function encode(opts) {\n  const buf = new Uint8Array(512);\n  let name = opts.name;\n  let prefix = '';\n\n  if (opts.typeflag === 5 && name[name.length - 1] !== '/') {\n    name += '/';\n  }\n\n  if (uint8ArrayFromString(name).byteLength !== name.length) {\n    return null; // utf-8\n  }\n\n  while (uint8ArrayFromString(name).byteLength > 100) {\n    const i = name.indexOf('/');\n\n    if (i === -1) {\n      return null;\n    }\n\n    prefix += prefix !== '' ? '/' + name.slice(0, i) : name.slice(0, i);\n    name = name.slice(i + 1);\n  }\n\n  if (uint8ArrayFromString(name).byteLength > 100 || uint8ArrayFromString(prefix).byteLength > 155) {\n    return null;\n  }\n\n  if (opts.linkname != null && uint8ArrayFromString(opts.linkname).byteLength > 100) {\n    return null;\n  }\n\n  buf.set(uint8ArrayFromString(name), 0);\n  buf.set(encodeOct(opts.mode & MASK, 6), 100);\n  buf.set(encodeOct(opts.uid, 6), 108);\n  buf.set(encodeOct(opts.gid, 6), 116);\n  buf.set(encodeOct(opts.size, 11), 124);\n  buf.set(encodeOct(opts.mtime.getTime() / 1000 | 0, 11), 136);\n  buf[156] = ZERO_OFFSET + toTypeflag(opts.type);\n\n  if (opts.linkname != null) {\n    buf.set(uint8ArrayFromString(opts.linkname), 157);\n  }\n\n  buf.set(USTAR_MAGIC, MAGIC_OFFSET);\n  buf.set(USTAR_VER, VERSION_OFFSET);\n\n  if (opts.uname != null) {\n    buf.set(uint8ArrayFromString(opts.uname), 265);\n  }\n\n  if (opts.gname != null) {\n    buf.set(uint8ArrayFromString(opts.gname), 297);\n  }\n\n  buf.set(encodeOct(opts.devmajor ?? 0, 6), 329);\n  buf.set(encodeOct(opts.devminor ?? 0, 6), 337);\n\n  if (prefix != null) {\n    buf.set(uint8ArrayFromString(prefix), 345);\n  }\n\n  buf.set(encodeOct(cksum(buf), 6), 148);\n  return buf;\n}","map":{"version":3,"mappings":"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","names":["fromString","uint8ArrayFromString","ZEROS","SEVENS","ZERO_OFFSET","charCodeAt","USTAR_MAGIC","USTAR_VER","MASK","parseInt","MAGIC_OFFSET","VERSION_OFFSET","toTypeflag","flag","cksum","block","sum","i","j","encodeOct","val","n","str","toString","length","slice","addLength","len","byteLength","digits","Math","floor","log","pow","encodePax","opts","result","name","linkname","pax","key","Object","prototype","hasOwnProperty","call","encode","buf","Uint8Array","prefix","typeflag","indexOf","set","mode","uid","gid","size","mtime","getTime","type","uname","gname","devmajor","devminor"],"sources":["C:\\Users\\Akshay Mishra\\OneDrive\\Desktop\\twitter-clone-dapp\\node_modules\\it-tar\\src\\pack-headers.ts"],"sourcesContent":["import { fromString as uint8ArrayFromString } from 'uint8arrays/from-string'\nimport type { EntryType, TarEntryHeader } from '.'\n\nconst ZEROS = '0000000000000000000'\nconst SEVENS = '7777777777777777777'\nconst ZERO_OFFSET = '0'.charCodeAt(0)\nconst USTAR_MAGIC = uint8ArrayFromString('ustar\\x00', 'binary')\nconst USTAR_VER = uint8ArrayFromString('00', 'binary')\nconst MASK = parseInt('7777', 8)\nconst MAGIC_OFFSET = 257\nconst VERSION_OFFSET = 263\n\nconst toTypeflag = function (flag?: EntryType) {\n  switch (flag) {\n    case 'file':\n      return 0\n    case 'link':\n      return 1\n    case 'symlink':\n      return 2\n    case 'character-device':\n      return 3\n    case 'block-device':\n      return 4\n    case 'directory':\n      return 5\n    case 'fifo':\n      return 6\n    case 'contiguous-file':\n      return 7\n    case 'pax-header':\n      return 72\n    default:\n      return 0\n  }\n}\n\nconst cksum = function (block: Uint8Array) {\n  let sum = 8 * 32\n  for (let i = 0; i < 148; i++) sum += block[i]\n  for (let j = 156; j < 512; j++) sum += block[j]\n  return sum\n}\n\nconst encodeOct = function (val: number, n: number): Uint8Array {\n  const str = val.toString(8)\n\n  if (str.length > n) {\n    return uint8ArrayFromString(SEVENS.slice(0, n) + ' ')\n  }\n\n  return uint8ArrayFromString(ZEROS.slice(0, n - str.length) + str + ' ')\n}\n\nconst addLength = function (str: string) {\n  const len = uint8ArrayFromString(str).byteLength\n  let digits = Math.floor(Math.log(len) / Math.log(10)) + 1\n\n  if (len + digits >= Math.pow(10, digits)) {\n    digits++\n  }\n\n  return `${len + digits}${str}`\n}\n\nexport function encodePax (opts: TarEntryHeader) { // TODO: encode more stuff in pax\n  let result = ''\n  if (opts.name != null) {\n    result += addLength(' path=' + opts.name + '\\n')\n  }\n  if (opts.linkname != null) {\n    result += addLength(' linkpath=' + opts.linkname + '\\n')\n  }\n\n  const pax = opts.pax\n\n  if (pax != null) {\n    for (const key in pax) {\n      if (Object.prototype.hasOwnProperty.call(pax, key)) {\n        result += addLength(' ' + key + '=' + pax[key] + '\\n')\n      }\n    }\n  }\n\n  return uint8ArrayFromString(result)\n}\n\nexport function encode (opts: TarEntryHeader): Uint8Array | null {\n  const buf = new Uint8Array(512)\n  let name = opts.name\n  let prefix = ''\n\n  if (opts.typeflag === 5 && name[name.length - 1] !== '/') {\n    name += '/'\n  }\n\n  if (uint8ArrayFromString(name).byteLength !== name.length) {\n    return null // utf-8\n  }\n\n  while (uint8ArrayFromString(name).byteLength > 100) {\n    const i = name.indexOf('/')\n    if (i === -1) {\n      return null\n    }\n    prefix += prefix !== '' ? '/' + name.slice(0, i) : name.slice(0, i)\n    name = name.slice(i + 1)\n  }\n\n  if (uint8ArrayFromString(name).byteLength > 100 || uint8ArrayFromString(prefix).byteLength > 155) {\n    return null\n  }\n\n  if (opts.linkname != null && uint8ArrayFromString(opts.linkname).byteLength > 100) {\n    return null\n  }\n\n  buf.set(uint8ArrayFromString(name), 0)\n  buf.set(encodeOct(opts.mode & MASK, 6), 100)\n  buf.set(encodeOct(opts.uid, 6), 108)\n  buf.set(encodeOct(opts.gid, 6), 116)\n  buf.set(encodeOct(opts.size, 11), 124)\n  buf.set(encodeOct((opts.mtime.getTime() / 1000) | 0, 11), 136)\n\n  buf[156] = ZERO_OFFSET + toTypeflag(opts.type)\n\n  if (opts.linkname != null) {\n    buf.set(uint8ArrayFromString(opts.linkname), 157)\n  }\n\n  buf.set(USTAR_MAGIC, MAGIC_OFFSET)\n  buf.set(USTAR_VER, VERSION_OFFSET)\n\n  if (opts.uname != null) {\n    buf.set(uint8ArrayFromString(opts.uname), 265)\n  }\n\n  if (opts.gname != null) {\n    buf.set(uint8ArrayFromString(opts.gname), 297)\n  }\n\n  buf.set(encodeOct(opts.devmajor ?? 0, 6), 329)\n  buf.set(encodeOct(opts.devminor ?? 0, 6), 337)\n\n  if (prefix != null) {\n    buf.set(uint8ArrayFromString(prefix), 345)\n  }\n\n  buf.set(encodeOct(cksum(buf), 6), 148)\n\n  return buf\n}\n"]},"metadata":{},"sourceType":"module"}